---
description:
globs:
alwaysApply: false
---
# プルリクエスト作成ルール

ユーザーから「このブランチのPRを作成して」という指示を受けたら、以下の手順に従ってプルリクエストを自動で作成してください。

## 1. 情報収集

まず、プルリクエスト作成に必要な情報を収集します。すべてのコマンドは `run_terminal_cmd` を使用して実行してください。

1.  **現在のブランチ名:** `git symbolic-ref --short HEAD` または `git rev-parse --abbrev-ref HEAD` を実行して取得します。
2.  **リポジトリ情報:** `git remote -v` を実行し、出力からGitHubのオーナー名とリポジトリ名を抽出します。 (例: `git@github.com:OWNER/REPO.git` から `OWNER` と `REPO` を取得)
3.  **ベースブランチ:** `git remote show origin | grep 'HEAD branch'` を実行し、デフォルトブランチ（例: `main`）を特定します。
4.  **変更内容（コミットログ）:**
    - ベースブランチ（例: `main`）から現在のブランチまでのコミットログを取得します。 `git log main..HEAD --pretty=format:"- %s"` のようなコマンドを使用します。これをPRの本文のベースにします。
    - 最新のコミットメッセージ (`git log -1 --pretty=%s`) をPRのタイトルのベースにします。
5.  **PRテンプレート:** `.github/PULL_REQUEST_TEMPLATE.md` ファイルが存在するか確認し、存在すればその内容を読み込んでPR本文のテンプレートとして使用します。

## 2. プルリクエストの作成

収集した情報を使って、プルリクエストを作成します。

- **タイトル:** 最新のコミットメッセージを基に、簡潔で分かりやすいタイトルを生成します。（例: `feat: 新機能の追加`, `fix: バグの修正`）
- **本文:**
    - PRテンプレートが存在する場合は、その形式に従って、収集したコミットログを「変更内容」などの適切なセクションに埋め込みます。
    - テンプレートがない場合は、収集したコミットログを基に本文を生成します。
- **ツールの実行:** `mcp_github_create_pull_request` ツールを以下のパラメータで実行します。
    - `owner`: (収集したオーナー名)
    - `repo`: (収集したリポジトリ名)
    - `title`: (生成したタイトル)
    - `head`: (現在のブランチ名)
    - `base`: (特定したベースブランチ名)
    - `body`: (生成した本文)

## 3. 結果報告

プルリクエストの作成に成功したら、そのURLをユーザーに報告してください。
失敗した場合は、エラーメッセージと原因を報告し、次の対応をユーザーに確認してください。
