---
description:
globs:
alwaysApply: false
---
# プルリクエスト作成ルール

ユーザーから「このブランチのPRを作成して」という指示を受けたら、以下の手順に従ってプルリクエストを自動で作成してください。

## 1. 情報収集

まず、プルリクエスト作成に必要な情報を収集します。すべてのコマンドは `run_terminal_cmd` を使用して実行してください。

1.  **現在のブランチ名:** `git symbolic-ref --short HEAD` または `git rev-parse --abbrev-ref HEAD` を実行して取得します。
2.  **リポジトリ情報:** `git remote -v` を実行し、出力からGitHubのオーナー名とリポジトリ名を抽出します。 (例: `git@github.com:OWNER/REPO.git` から `OWNER` と `REPO` を取得)
3.  **ベースブランチ:** `git remote show origin | grep 'HEAD branch'` を実行し、デフォルトブランチ（例: `main`）を特定します。
4.  **変更内容（コミットログ）:**
    - ベースブランチ（例: `main`）から現在のブランチまでのコミットログを取得します。 `git log main..HEAD --pretty=format:"- %s"` のようなコマンドを使用します。これをPRの本文のベースにします。
    - 取得したコミットログ全体を要約し、PRのタイトルとします。
5.  **PRテンプレート:** `.github/PULL_REQUEST_TEMPLATE.md` ファイルが存在するか確認し、存在すればその内容を読み込んでPR本文のテンプレートとして使用します。

## 2. 作成内容の確認

収集した情報とユーザーの指示を基に、作成するプルリクエストのタイトルと本文を生成し、チャットに表示して承認を求めます。

```markdown
以下の内容でプルリクエストを作成します。よろしいですか？

---

**タイトル:**
(生成されたタイトル)

---

**本文:**
(生成された本文)

---
```

ユーザーからの承認が得られた場合のみ、次のステップに進みます。修正の指示があった場合は、内容を修正して再度確認を求めます。

## 3. プルリクエストの作成

ユーザーの承認後、`mcp_github_create_pull_request` ツールを以下のパラメータで実行します。
-   `owner`: (収集したオーナー名)
-   `repo`: (収集したリポジトリ名)
-   `title`: (確認済みのタイトル)
-   `head`: (現在のブランチ名)
-   `base`: (特定したベースブランチ名)
-   `body`: (確認済みの本文)

## 4. 結果報告

プルリクエストの作成に成功したら、そのURLをユーザーに報告してください。
失敗した場合は、エラーメッセージと原因を報告し、次の対応をユーザーに確認してください。
