# 1. MVP定義

## 1.1. 目次

- [1. MVP定義](#1-mvp定義)
  - [1.1. 目次](#11-目次)
  - [1.2. はじめに](#12-はじめに)
    - [1.2.1. 目的](#121-目的)
    - [1.2.2. MVPの位置づけ](#122-mvpの位置づけ)
  - [1.3. MVPのゴール](#13-mvpのゴール)
  - [1.4. MVPスコープ](#14-mvpスコープ)
    - [1.4.1. 対象機能 (主要ユースケース)](#141-対象機能-主要ユースケース)
    - [1.4.2. 対象オブザーバビリティ機能](#142-対象オブザーバビリティ機能)
    - [1.4.3. 対象ユーザーストーリー](#143-対象ユーザーストーリー)
    - [1.4.4. 対象画面](#144-対象画面)
    - [1.4.5. 対象非機能要件](#145-対象非機能要件)
  - [1.5. MVPスコープ外 (主なもの)](#15-mvpスコープ外-主なもの)
  - [1.6. MVPの意義](#16-mvpの意義)

## 1.2. はじめに

### 1.2.1. 目的

この文書は、「AWSオブザーバビリティ学習用eコマースアプリ」プロジェクトにおける Minimum Viable Product (MVP) の範囲と内容を定義します。本プロジェクトの主目的である AWS 環境におけるオブザーバビリティの実践的な学習を可能にするための、最小限かつ価値あるプロダクト範囲を明確にすることを目的とします。

### 1.2.2. MVPの位置づけ

このMVPは、プロジェクトの最初のリリース可能なバージョンです。以下の価値を提供します。

* 基本的なeコマースアプリケーションの動作基盤。
* AWSオブザーバビリティの主要な柱（ログ、メトリクス、トレース）を収集・可視化・分析するための基本的な環境。
* 学習者がオブザーバビリティの概念とAWSツールを体験するための出発点。

MVPは完成形ではなく、今後のリリース（Release 2以降）で機能拡張やオブザーバビリティの深化を行っていくための土台となります。

## 1.3. MVPのゴール

このMVPを完成させることにより、以下のゴール達成を目指します。

* **機能ゴール:**
  * ゲストユーザーが商品を閲覧し、カートに入れ、注文を完了できる。
  * 管理者がログインし、商品を登録・基本的な管理（在庫更新含む）を行い、入った注文を確認できる。
  * 基本的な認証基盤（管理者向け）、通知基盤、非同期処理基盤、画像処理基盤、CI/CDパイプラインが動作する。
* **オブザーバビリティ学習ゴール:**
  * フロントエンド(CloudFront)からバックエンド(API Gateway, Lambda, Fargate)、データベース(RDS)に至るリクエストフローにおいて、ログ、メトリクス、トレースが収集されている状態を構築できる。
  * CloudWatch Logs Insights を用いて、構造化されたログからエラー原因の特定や特定リクエストの追跡といった基本的な調査ができる。
  * CloudWatch Metrics を用いて、主要なシステムリソースやアプリケーションのパフォーマンス指標（レイテンシ、エラー率など）をグラフで確認できる。カスタムメトリクス(EMF)の基本的な実装と確認ができる。
  * AWS X-Ray を用いて、サービス間の依存関係（サービスマップ）を可視化し、分散リクエストのトレース詳細を確認してボトルネックやエラー箇所を特定する基本的な調査ができる。
  * CloudWatch Dashboard を用いて、収集した主要なメトリクスをまとめた基本的なヘルスダッシュボードを作成・確認できる (推奨スコープとして含む)。
  * CloudWatch Alarm を用いて、主要なメトリクスに対する基本的なアラートを設定し、異常発生時に通知を受け取る仕組みを構築・体験できる (推奨スコープとして含む)。
  * `US-SRE-OBS-INCIDENT-INVESTIGATE-01` (インシデント調査) および `US-SRE-VIS-01` (可視化・分析) の基本的なレベルを達成できる。

## 1.4. MVPスコープ

### 1.4.1. 対象機能 (主要ユースケース)

以下の主要なユーザーシナリオ（ユースケース）を実現します。

* **顧客 (ゲスト):**
  * 商品を検索・閲覧する (`UC-CUST-BROWSE-01`, `UC-CUST-BROWSE-02`, `UC-CUST-BROWSE-03`)
  * 商品をカートに追加し、内容を確認する (`UC-CUST-CART-01`)
  * チェックアウト処理を行う (`UC-CUST-CHECKOUT-01`)
* **管理者:**
  * 管理画面にログインする (`UC-MGR-AUTH-LOGIN-01`)
  * 商品を登録・更新する (`UC-MGR-PROD-01`)
  * 商品画像をアップロードする (`UC-MGR-PROD-02`)
  * カテゴリを管理する (`UC-MGR-CAT-01`)
  * 在庫を確認・更新する (`UC-MGR-INV-01`, `UC-MGR-INV-02`)
  * 注文を確認する (`UC-MGR-ORDER-01`)
  * 管理者アカウントを管理する (`UC-SEC-AUTH-MANAGE-01`)
  * ロールと権限を管理する (`UC-SEC-AUTH-RBAC-01`)

### 1.4.2. 対象オブザーバビリティ機能

* **データ収集・計装:**
  * 構造化ログ出力 (slog) と CloudWatch Logs への集約
  * 標準システム/アプリメトリクス収集 (CloudWatch Metrics)
  * カスタムメトリクス収集 (EMF経由)
  * 分散トレーシング (X-Ray SDK for Go)
  * オブザーバビリティインフラのIaC管理 (Terraform)
* **可視化・分析・アラート:**
  * CloudWatch Logs Insights でのログ検索・分析
  * CloudWatch Metrics でのグラフ表示
  * X-Ray でのサービスマップとトレース詳細表示
  * 基本的な CloudWatch Dashboard の作成・利用 (推奨)
  * 基本的な CloudWatch Alarm の設定・通知 (推奨)
* **対象ツール:** CloudWatch (Logs, Metrics, Alarms, Dashboards), AWS X-Ray

### 1.4.3. 対象ユーザーストーリー

ユーザーストーリーマップ (`03-2-2_story-map.md`) において、**「リリース1 (MVP)」** に分類されている全てのユーザーストーリー。

### 1.4.4. 対象画面

画面一覧 (`Screen List`) において、**「ステータス ✅」** とマークされている全ての画面。

### 1.4.5. 対象非機能要件

非機能要件定義 (`Non-Functional Requirements`) において、**「目標レベル (MVP) ✅」** とマークされている全ての要件。

## 1.5. MVPスコープ外 (主なもの)

以下の機能・要素はMVPのスコープ外とし、今後のリリースで実装を検討します。

* **顧客機能:** 顧客アカウント登録・ログイン、パスワードリセット、プロフィール編集、注文履歴、配送状況確認、クーポン適用、関連商品表示、入荷通知機能。
* **管理者機能:** カテゴリ編集、低在庫アラート、出荷処理（ステータス更新、情報入力）、返品交換処理、プロモーション管理、高度なレポート機能。
* **認証:** ソーシャルログイン、詳細な認証ポリシー設定(MFA必須化等はRelease 2)。
* **アーキテクチャ:** EventBridge, SNS, SES, DynamoDB の本格利用、ALBによるマイクロサービスルーティング。
* **オブザーバビリティ:** CloudWatch RUM, Synthetics, CloudTrail, Config, OpenTelemetry(ADOT), Managed Grafana/Prometheus, DevOps Guru, FIS (カオスエンジニアリング), より高度なダッシュボード/アラート設定、コスト最適化の本格的な取り組み。
* **BI分析:** BA向けの詳細なデータ分析機能。
* **運用:** データエクスポート、定期メンテナンスバッチ。

## 1.6. MVPの意義

このMVPスコープは、以下の理由により「AWSオブザーバビリティ学習」という目的において価値があり、かつ実現可能な最初のステップとして定義されました。

* **コア学習ループの確立:** オブザーバビリティの基本サイクル（計装→収集→可視化→分析→調査）を一通り体験できる最小限の要素を含んでいます。
* **多様な環境:** LambdaとFargateという異なるコンピューティング環境、API Gateway、SQS、RDSといった複数のAWSサービスを組み合わせることで、多様な監視対象と連携パターンを提供し、学習の幅を広げます。
* **実現可能性:** スコープを基本的な機能とオブザーバビリティの基盤に絞ることで、妥当な期間内での開発・構築を目指します。
* **段階的学習:** まずAWSネイティブのオブザーバビリティツールに習熟し、その上で次のステップ（RUM, OTel, カオスなど）へ進むための良い土台となります。

このMVPを完成させることで、参加者はAWSにおけるオブザーバビリティの基本的な概念とツール操作を習得し、より高度なトピックへ進むための自信と知識を得ることができるでしょう。
