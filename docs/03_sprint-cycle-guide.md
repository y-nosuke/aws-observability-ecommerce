# スプリントの反復サイクルと継続的なバックログ管理

このドキュメントでは、アジャイル開発の核となるスプリントの反復サイクル（計画、実行、レビュー、振り返り）の進め方と、プロダクトバックログを継続的に管理・改善していくためのプラクティスについて説明します。

## 1. スプリントの反復サイクル (開発の実行)

スプリントは、価値のあるインクリメント（動くソフトウェアの一部）を生み出すための固定長の短い期間（本プロジェクトでは1〜2週間を推奨）のイテレーションです。各スプリントは以下のイベントで構成されます。

### 1.1. スプリント計画 (Sprint Planning)

- **目的:** スプリントで何を達成するか（スプリントゴール）を決定し、それを達成するためにどのプロダクトバックログアイテム (PBI) に取り組み、どのように作業を進めるかを計画します。
- **タイミング:** 各スプリントの開始時。
- **主な活動:**
    1. **プロダクトバックログのリファインメント (準備):**
        - スプリント計画ミーティングの前に、プロダクトオーナー（今回はご自身がその役割を兼務）と開発チーム（ご自身）は、プロダクトバックログの上位にあるPBI（特に次のスプリントで取り組みそうなもの）について、詳細を明確にし、受け入れ基準を定義し、ストーリーポイントで見積もり、必要であれば分割します。この活動は継続的に行われます。
    2. **スプリントゴールの設定:**
        - プロダクトオーナーが提示するビジネス目標やプロダクトの方向性に基づき、このスプリントで達成したい具体的で測定可能なゴールをチームで合意します。スプリントゴールは、チームが集中し、協力して取り組むための指針となります。
    3. **PBIの選定とスプリントバックログの作成:**
        - スプリントゴールを達成するために必要なPBIを、プロダクトバックログから優先順位と見積もり（ストーリーポイント）、そしてチームのキャパシティ（過去のスプリントのベロシティや利用可能時間）を考慮して選択します。
        - 選択されたPBI群が「スプリントバックログ」となります。
    4. **PBIのタスク分割 (任意だが推奨):**
        - 選択した各PBIを完了するために必要な具体的な作業タスクを洗い出し、Issueテンプレート内のチェックリストなどに記述します。これにより、作業の見通しが良くなり、進捗管理がしやすくなります。
    5. **スプリント計画Issueの作成と記録:**
        - スプリント計画の結果（スプリントゴール、選択したPBIリスト、キャパシティ計画、想定されるリスクなど）を、`sprint-planning.md` テンプレートを基にGitHub Issue (`Type: Sprint Plan`, タイトルに `SP-[スプリント番号]`) として記録します。

### 1.2. スプリント中の開発作業と進捗追跡

- **目的:** スプリントバックログに含まれるPBIを開発し、スプリントゴール達成に向けてインクリメントを作成します。
- **主な活動とプラクティス:**
    1. **日々の進捗確認 (デイリースクラムの考え方):**
        - 毎日短時間（例: 15分以内）で進捗を確認します。「昨日やったこと」「今日やること」「困っていること（ブロッカー）」の3点を意識し、必要に応じて計画を調整します。
        - 個人プロジェクトの場合でも、日々の作業開始時にこの3点を確認し、スプリント計画Issueのコメント欄などに簡潔に記録することが推奨されます。
    2. **GitHub Projects を活用した進捗管理:**
        - **カンバンボード:** 現在のスプリントビュー（ボード形式）で、PBIのIssueカードをステータス（Todo, In Progress, Done）に合わせて移動させ、作業の進捗を可視化します。
        - **Issueステータス更新:** 作業の開始・完了に応じて、PBIのIssueの `Status` カスタムフィールドを更新します。
    3. **Issue内のチェックボックスによる詳細タスク管理:**
        - 各PBIのIssue本文にあるタスクチェックリストの項目が完了したら、チェックを入れます。これにより、PBI内の詳細な進捗が把握できます。
    4. **ブランチ運用とIssue・コミット・プルリクエストの紐付け:**
        - 開発作業のトレーサビリティと管理を効率化するため、以下のブランチ運用と紐付けルールを推奨します。
        - **A. フィーチャーーブランチの作成:**
            - 各PBI (プロダクトバックログアイテム) に取り組む際には、`main`ブランチから新しいフィーチャーブランチを作成します。
            - **ブランチ名の推奨形式:** `feature/[Issue番号]-[短い説明]`
              - **`[Issue番号]`** は、GitHubで該当PBIのIssueを作成した際に付与される番号です。
              - **`[短い説明]`** は、PBIの内容を簡潔に表す小文字の英語（ケバブケース）です。
              - 例: PBI Issue `#42` (商品一覧API実装) の場合 → `feature/42-product-list-api`
              - 例: PBI Issue `#43` (相関IDログ出力) の場合 → `feature/43-correlation-id-logging`
              - これにより、ブランチ名からどのPBIのIssueに関連する作業かが一目でわかります。
        - **B. コミットメッセージ:**
            - コミットは小さく、意味のある単位で行います。
            - コミットメッセージは、何を変更したのかが明確にわかるように記述します (例: "商品一覧APIのレスポンスに価格情報を追加")。
            - 個々のコミットメッセージにIssue番号を毎回含めることは必須としません。Issueとの主要な紐付けはプルリクエストで行います。
            - ただし、特定のコミットが特定のIssueに強く関連する場合や、後から参照しやすくしたい場合は、メッセージの末尾に `(Refs #Issue番号)` のように記述することも有効です。
        - **C. プルリクエスト (PR) の作成とIssueのクローズ:**
            - フィーチャーブランチでの作業が完了し、PBIの受け入れ基準を満たしたと判断したら、`main`ブランチへのマージを目的としたプルリクエストを作成します。
            - PRのタイトルまたは説明文に、対応するPBIのIssueをクローズするためのキーワード (`Closes #Issue番号`, `Fixes #Issue番号`, `Resolves #Issue番号`など) を記述します。
            - GitHubリポジトリに `PULL_REQUEST_TEMPLATE.md` を設置し、PR作成時にこのテンプレートが利用されるようにすることを推奨します。テンプレート内に「関連Issue」の項目を設けておくと、紐付け忘れを防ぎやすくなります。
            - PRがレビューされ (セルフレビュー含む)、承認されて `main`ブランチにマージされると、キーワードによって指定されたIssueが自動的にクローズされます。
    5. **完了の定義 (Definition of Done - DoD) の遵守:**  **(番号を1つずらす)**
        - PBIが「Done（完了）」とみなされるためには、事前に定義された「完了の定義」（例: コードレビュー済み、テスト通過、ドキュメント更新済みなど）の全ての基準を満たしている必要があります。個人プロジェクトでも、品質を保つために簡易的なDoDを設定することを推奨します。

### 1.3. スプリントレビュー (Sprint Review)

- **目的:** スプリントで完成したインクリメント（動くソフトウェアの一部）をステークホルダー（今回はご自身が主要なステークホルダー）に提示し、成果を確認し、フィードバックを得て、プロダクトバックログの調整に繋げます。
- **タイミング:** 各スプリントの終了時（レトロスペクティブの前）。
- **主な活動:**
    1. **完成したインクリメントのデモンストレーション:** スプリントバックログに含まれ、「Done」となったPBIによって実現された機能を実際に動かして見せます。
    2. **スプリントゴールの達成度評価:** 設定したスプリントゴールが達成できたかどうかを確認します。
    3. **フィードバックの収集:** デモンストレーションや成果物に対して、自分自身がユーザー視点やビジネス視点でフィードバックを行います。「これで本当に価値があるか？」「使いやすいか？」「次に何をすべきか？」などを自問します。
    4. **プロダクトバックログへの反映:** 得られたフィードバックや新しい気づきを基に、プロダクトバックログのPBIを追加・修正したり、優先順位を見直したりします。

### 1.4. スプリントレトロスペクティブ (Sprint Retrospective)

- **目的:** スプリントの進め方（人、プロセス、ツール、関係性など）を振り返り、良かった点、問題点、改善すべき点を見つけ出し、次のスプリントで試す具体的な改善アクションを計画します。継続的なプロセス改善を目指します。
- **タイミング:** 各スプリントの終了時（スプリントレビューの後）。
- **主な活動:**
    1. **振り返りの実施:** KPT (Keep, Problem, Try) などのフレームワークを用いて、スプリント全体を客観的に振り返ります。
        - **Keep:** スプリント中に上手くいったこと、効果があったこと、今後も続けたいこと。
        - **Problem:** スプリント中に問題だと感じたこと、上手くいかなかったこと、課題。
        - **Try:** Problemを受けて、次のスプリントで具体的に試したい改善アクション。
    2. **改善アクションの特定と計画:** 「Try」の中から、次のスプリントで実行可能な具体的な改善アクションを1〜2個選び、誰がいつまでにどのように行うかを計画します。
    3. **Retrospective Issueの作成と記録:** 振り返りの結果と改善アクションを、`retrospective.md` テンプレートを基にGitHub Issue (`Type: Retrospective`, タイトルに `RT-[スプリント番号]`) として記録します。
    4. **AI活用に関する振り返り:** AI支援ツールの活用状況、効果、課題、改善点なども振り返りの対象とします。

## 2. プロダクトバックログの継続的な管理

プロダクトバックログは一度作ったら終わりではなく、プロジェクトの進行とともに常に進化し続ける生きたドキュメントです。

### 2.1. 新しいPBIの追加

- ユーザーからのフィードバック（今回はご自身の気づきや学習）、新しいビジネス要求（プロジェクト目標の変化）、技術的な改善の必要性などに応じて、新しいPBIがプロダクトバックログに追加されます。
- 追加されたPBIは、他のPBIと同様にリファインメントの対象となります。

### 2.2. 既存PBIの継続的なリファインメント

- プロダクトバックログリファインメントは、スプリント計画の前だけでなく、スプリント中にも必要に応じて行われる継続的な活動です。
- **目的:** プロダクトバックログのPBIを常に「準備ができている (Ready)」状態（詳細が明確で、見積もり可能で、次のスプリントで着手できる状態）に保つこと。
- **主な活動:**
  - **PBIの詳細化:** 優先度の高いPBIについて、ユーザーストーリー形式での記述を明確にし、受け入れ基準を具体的にします。
  - **PBIの分割:** 大きすぎるPBIは、スプリント内で完了可能なより小さなPBIに分割します。
  - **PBIの見積もり更新:** 新しい情報や理解に基づいて、PBIのストーリーポイントを見直します。
  - **PBIの優先順位見直し:** ビジネス価値、緊急度、依存関係、リスクなどを考慮し、プロダクトバックログ全体の優先順位を最新の状態に保ちます。

### 2.3. エピックの進捗管理と必要に応じた見直し

- 各エピック (`EP-...-[連番]`) に紐づくPBIの完了状況を追跡し、エピック全体の進捗を把握します。
- プロジェクトの状況変化や学習の進展により、エピックの目標やスコープ、優先順位を見直すこともあります。新しいエピックが追加されたり、既存のエピックが分割・統合されたりすることもあります。
