# AWSオブザーバビリティ学習用eコマースアプリ - ユースケース

## ユースケース一覧

| ID | カテゴリ | ユースケース名 | アクター |
|----|----------|---------------|----------|
| **顧客向けユースケース** |
| UC-C01 | 商品検索・閲覧 | カテゴリブラウジング | 顧客 |
| UC-C02 | 商品検索・閲覧 | 商品検索 | 顧客 |
| UC-C03 | 商品検索・閲覧 | 商品詳細閲覧 | 顧客 |
| UC-C04 | ショッピングカート・注文 | カートへの商品追加 | 顧客 |
| UC-C05 | ショッピングカート・注文 | カート内商品管理 | 顧客 |
| UC-C06 | ショッピングカート・注文 | 注文処理 | 顧客 |
| UC-C07 | ユーザー管理 | アカウント登録 | 未登録ユーザー |
| UC-C08 | ユーザー管理 | ログインとセッション管理 | 登録済みユーザー |
| UC-C09 | ユーザー管理 | プロフィール管理 | 登録済みユーザー |
| UC-C10 | 通知と履歴管理 | 注文履歴確認 | 登録済みユーザー |
| UC-C11 | 通知と履歴管理 | 配送状況確認 | 登録済みユーザー |
| UC-C12 | 通知と履歴管理 | 在庫状況通知登録 | 登録済みユーザー |
| **管理者向けユースケース** |
| UC-A01 | 在庫管理 | 在庫モニタリング | 在庫管理者 |
| UC-A02 | 在庫管理 | 在庫更新 | 在庫管理者 |
| UC-A03 | 在庫管理 | 低在庫アラート対応 | 在庫管理者 |
| UC-A04 | オーダー管理 | 注文確認処理 | 注文管理者 |
| UC-A05 | オーダー管理 | 出荷処理 | 出荷管理者 |
| UC-A06 | オーダー管理 | 返品・交換処理 | カスタマーサポート管理者 |
| **オブザーバビリティプロセスユースケース** |
| UC-O01 | 障害検知と対応 | パフォーマンス低下の検知と対応 | システム運用者 |
| UC-O02 | 障害検知と対応 | エラー増加の検知と対応 | システム運用者 |
| UC-O03 | キャパシティプランニング | リソース使用率の分析と予測 | インフラストラクチャ管理者 |
| UC-O04 | キャパシティプランニング | パフォーマンス最適化 | アプリケーション開発者 |
| **ビジネスインテリジェンスユースケース** |
| UC-B01 | ビジネス分析 | 売上・トラフィック分析 | ビジネスアナリスト |
| UC-B02 | ビジネス分析 | 商品パフォーマンス分析 | 商品管理者 |

## 顧客向けユースケース

### 1. 商品検索・閲覧

**UC-C01: カテゴリブラウジング**

- **アクター**: 顧客
- **前提条件**: なし
- **メインフロー**:
  1. 顧客がウェブサイトのカテゴリメニューから目的のカテゴリを選択する
  2. システムは選択されたカテゴリに属する全商品を一覧表示する
  3. 顧客は表示された商品リストをブラウジングする
- **代替フロー**:
  - 該当カテゴリに商品がない場合、「商品がありません」と表示する
- **オブザーバビリティポイント**:
  - カテゴリ別のアクセス率計測
  - ページロード時間の計測
  - 表示された商品数のログ記録
  - フロントエンドのパフォーマンスメトリクス（FCP, LCP）

**UC-C02: 商品検索**

- **アクター**: 顧客
- **前提条件**: なし
- **メインフロー**:
  1. 顧客が検索バーにキーワードを入力し検索する
  2. システムはキーワードに関連する商品を検索結果として表示する
  3. 顧客は検索結果をフィルタリングまたはソートして閲覧する
- **代替フロー**:
  - 検索結果がない場合、「検索結果がありません」と表示し、関連商品を推奨する
- **オブザーバビリティポイント**:
  - 検索クエリのパターン分析
  - 検索結果の数と質の計測
  - 検索レスポンス時間のモニタリング
  - ゼロヒット検索クエリの記録と分析

**UC-C03: 商品詳細閲覧**

- **アクター**: 顧客
- **前提条件**: なし
- **メインフロー**:
  1. 顧客が商品リストから特定の商品を選択する
  2. システムは商品の詳細情報（説明、価格、在庫状況、画像など）を表示する
  3. 顧客は商品情報を確認し、レビューを閲覧する
- **代替フロー**:
  - 商品が在庫切れの場合、「在庫切れ」と表示し、入荷通知のオプションを提供する
- **オブザーバビリティポイント**:
  - 商品詳細ページの滞在時間計測
  - 特定商品の閲覧数トラッキング
  - 画像読み込み性能の計測
  - カート追加率の追跡

### 2. ショッピングカートと注文処理

**UC-C04: カートへの商品追加**

- **アクター**: 顧客
- **前提条件**: 商品詳細ページを閲覧している
- **メインフロー**:
  1. 顧客が「カートに追加」ボタンをクリックする
  2. システムは選択された商品をカートに追加する
  3. システムはカート追加の成功メッセージを表示する
- **代替フロー**:
  - 在庫不足の場合、「在庫不足」メッセージを表示する
  - 既にカートに同じ商品がある場合、数量を増やすか確認する
- **オブザーバビリティポイント**:
  - カート追加成功率の計測
  - カート追加から購入までの時間追跡
  - カート内商品数の分布分析
  - 在庫不足による追加失敗の記録

**UC-C05: カート内商品管理**

- **アクター**: 顧客
- **前提条件**: カートに商品が追加されている
- **メインフロー**:
  1. 顧客がカートページを開く
  2. システムはカート内の商品リストと合計金額を表示する
  3. 顧客は数量の変更または商品の削除を行う
  4. システムはカートの内容と金額を更新する
- **代替フロー**:
  - カートが空の場合、「カートは空です」と表示する
- **オブザーバビリティポイント**:
  - カート内商品の平均滞在時間
  - カートからの商品削除率
  - カート更新操作の頻度
  - カート放棄率の分析

**UC-C06: 注文処理**

- **アクター**: 顧客
- **前提条件**: カートに商品が追加されており、ユーザーがログインしている
- **メインフロー**:
  1. 顧客が「チェックアウト」ボタンをクリックする
  2. システムは配送先住所と支払い方法の選択画面を表示する
  3. 顧客が必要情報を入力し、「注文を確定」をクリックする
  4. システムは在庫を確認し、支払い処理を行う
  5. システムは注文確認画面を表示し、確認メールを送信する
- **代替フロー**:
  - 支払い処理に失敗した場合、エラーメッセージを表示し再試行を促す
  - 在庫不足が発生した場合、顧客に通知し代替商品を提案する
- **オブザーバビリティポイント**:
  - チェックアウトプロセスの完了率
  - 各ステップでの離脱率
  - 支払い処理のレイテンシ
  - 注文プロセス全体の所要時間
  - 支払い失敗の原因分析

### 3. ユーザー管理

**UC-C07: アカウント登録**

- **アクター**: 未登録ユーザー
- **前提条件**: なし
- **メインフロー**:
  1. ユーザーが「アカウント登録」リンクをクリックする
  2. システムは登録フォームを表示する
  3. ユーザーが必要情報（メールアドレス、パスワードなど）を入力する
  4. システムが情報を検証し、アカウントを作成する
  5. システムは確認メールを送信し、登録完了画面を表示する
- **代替フロー**:
  - 入力情報が不正な場合、エラーメッセージを表示して修正を促す
  - メールアドレスが既に登録されている場合、パスワードリセットを提案する
- **オブザーバビリティポイント**:
  - 登録フォームの完了率
  - 登録失敗の主要原因
  - メール確認完了率
  - 新規登録後の初回ログイン成功率

**UC-C08: ログインとセッション管理**

- **アクター**: 登録済みユーザー
- **前提条件**: ユーザーアカウントが存在する
- **メインフロー**:
  1. ユーザーがログインページでメールアドレスとパスワードを入力する
  2. システムが認証情報を検証し、有効なセッションを確立する
  3. システムはユーザーをトップページまたは前回のページにリダイレクトする
- **代替フロー**:
  - 認証情報が無効な場合、エラーメッセージを表示する
  - パスワードを忘れた場合のリセットフローを提供する
- **オブザーバビリティポイント**:
  - ログイン成功率
  - ログイン失敗の原因分析
  - セッション長の分布
  - デバイス・ブラウザ別のログイン統計

**UC-C09: プロフィール管理**

- **アクター**: 登録済みユーザー
- **前提条件**: ユーザーがログインしている
- **メインフロー**:
  1. ユーザーがマイページから「プロフィール管理」を選択する
  2. システムはユーザープロフィール情報を表示する
  3. ユーザーが情報（名前、住所、電話番号など）を更新する
  4. システムが変更を保存し、成功メッセージを表示する
- **代替フロー**:
  - 入力情報の検証に失敗した場合、エラーメッセージを表示する
- **オブザーバビリティポイント**:
  - プロフィール更新頻度
  - 更新時のエラー率
  - プロフィール完全度（任意フィールドの入力率）
  - パスワード変更頻度

### 4. 通知と履歴管理

**UC-C10: 注文履歴確認**

- **アクター**: 登録済みユーザー
- **前提条件**: ユーザーがログインしており、過去に注文がある
- **メインフロー**:
  1. ユーザーがマイページから「注文履歴」を選択する
  2. システムは過去の注文リストを表示する
  3. ユーザーが特定の注文を選択して詳細を確認する
- **代替フロー**:
  - 注文履歴がない場合、「注文履歴がありません」と表示する
- **オブザーバビリティポイント**:
  - 注文履歴閲覧率
  - 特定の注文の詳細確認率
  - 再注文（同じ商品の再購入）率
  - 注文履歴ページの滞在時間

**UC-C11: 配送状況確認**

- **アクター**: 登録済みユーザー
- **前提条件**: 進行中の注文がある
- **メインフロー**:
  1. ユーザーが注文詳細ページで「配送状況」を確認する
  2. システムは現在の配送ステータスと履歴を表示する
- **代替フロー**:
  - 配送情報がまだ更新されていない場合、「準備中」と表示する
- **オブザーバビリティポイント**:
  - 配送状況確認の頻度
  - ステータス別の確認回数
  - 配送遅延時の問い合わせ率
  - 通知メール開封率との相関

**UC-C12: 在庫状況通知登録**

- **アクター**: 登録済みユーザー
- **前提条件**: 商品が在庫切れである
- **メインフロー**:
  1. ユーザーが在庫切れ商品ページで「入荷通知」を選択する
  2. システムはメールアドレスを確認または要求する
  3. システムは通知登録の成功メッセージを表示する
  4. 商品が入荷した時点で、システムは自動的に通知メールを送信する
- **代替フロー**:
  - ユーザーが既に通知登録している場合、その旨を表示する
- **オブザーバビリティポイント**:
  - 在庫切れ商品への通知登録率
  - 通知後の購入コンバージョン率
  - 特定商品の通知登録数（人気指標）
  - 入荷からの購入タイミング分布

## 管理者向けユースケース

### 1. 在庫管理

**UC-A01: 在庫モニタリング**

- **アクター**: 在庫管理者
- **前提条件**: 管理者が管理システムにログインしている
- **メインフロー**:
  1. 管理者が在庫管理ダッシュボードを開く
  2. システムは全商品の現在の在庫レベルと過去のトレンドを表示する
  3. 管理者は在庫レベルに基づいてフィルタリングする（低在庫、品切れなど）
- **代替フロー**:
  - 特定の商品カテゴリでフィルタリングする
- **オブザーバビリティポイント**:
  - ダッシュボード読み込み時間
  - 低在庫アラートの頻度
  - 管理者の在庫チェック頻度
  - 品切れ状態の平均期間

**UC-A02: 在庫更新**

- **アクター**: 在庫管理者
- **前提条件**: 管理者が管理システムにログインしている
- **メインフロー**:
  1. 管理者が特定の商品を選択し、在庫数量を更新する
  2. システムは更新を処理し、新しい在庫数を反映する
  3. 必要に応じて、システムは関連する入荷通知を登録ユーザーに送信する
- **代替フロー**:
  - バッチ処理による複数商品の一括更新
- **オブザーバビリティポイント**:
  - 在庫更新操作の頻度と時間帯
  - 更新後の通知送信数
  - 更新後の購入増加率
  - 在庫データの整合性確認

**UC-A03: 低在庫アラート対応**

- **アクター**: 在庫管理者
- **前提条件**: 低在庫アラートが発生している
- **メインフロー**:
  1. システムが設定された閾値を下回った商品についてアラートを生成する
  2. 管理者がアラート通知を受け取り、詳細を確認する
  3. 管理者が発注プロセスを開始するか、アラートを確認済みとしてマークする
- **代替フロー**:
  - 定期的なレポートで低在庫商品をまとめて確認する
- **オブザーバビリティポイント**:
  - アラート生成から確認までの時間
  - アラート対応の完了率
  - 発注までの平均リードタイム
  - 低在庫による販売機会損失の推定

### 2. オーダー管理

**UC-A04: 注文確認処理**

- **アクター**: 注文管理者
- **前提条件**: 新しい注文が提出されている
- **メインフロー**:
  1. 管理者が注文管理ダッシュボードで新規注文を確認する
  2. 管理者が注文詳細を確認し、有効性をチェックする
  3. 管理者が注文を承認し、次の処理ステップに進める
- **代替フロー**:
  - 問題がある場合、注文をホールドし、顧客に連絡する
  - 不正の疑いがある場合、注文をレビュー待ちとしてマークする
- **オブザーバビリティポイント**:
  - 注文確認までの平均時間
  - 注文承認率
  - 問題のある注文の割合と種類
  - 注文処理のボトルネック特定

**UC-A05: 出荷処理**

- **アクター**: 出荷管理者
- **前提条件**: 注文が確認され、支払いが完了している
- **メインフロー**:
  1. 管理者が出荷待ちの注文リストを確認する
  2. 管理者が特定の注文を選択し、出荷準備を開始する
  3. 出荷情報（追跡番号など）を入力する
  4. システムが出荷ステータスを更新し、顧客に通知メールを送信する
- **代替フロー**:
  - 一部商品のみ出荷の場合、分割出荷として処理する
- **オブザーバビリティポイント**:
  - 注文から出荷までのリードタイム
  - 出荷処理の時間分布
  - 通知メールの配信成功率
  - 出荷後の問い合わせ率

**UC-A06: 返品・交換処理**

- **アクター**: カスタマーサポート管理者
- **前提条件**: 顧客から返品または交換リクエストがある
- **メインフロー**:
  1. 管理者が返品/交換リクエストを受け取り、詳細を確認する
  2. 管理者がリクエストを承認し、返品/交換プロセスを開始する
  3. 返品商品受領後、システムで処理を完了させる
  4. 必要に応じて、交換商品の出荷または返金処理を行う
- **代替フロー**:
  - リクエストが基準を満たさない場合、拒否理由を顧客に通知する
- **オブザーバビリティポイント**:
  - 返品・交換率（商品カテゴリ別）
  - 処理完了までの平均時間
  - 返品理由の分析
  - 顧客満足度（返品プロセス後の再購入率）

## オブザーバビリティプロセスユースケース

### 1. 障害検知と対応

**UC-O01: パフォーマンス低下の検知と対応**

- **アクター**: システム運用者
- **前提条件**: アプリケーションが本番環境で稼働している
- **メインフロー**:
  1. モニタリングシステムがAPI応答時間の増加を検知し、アラートを生成する
  2. 運用者がアラートを受信し、ダッシュボードで詳細を確認する
  3. X-Rayトレースを使用して遅延の根本原因を特定する
  4. 運用者が問題を修正し、パフォーマンスの回復を確認する
- **代替フロー**:
  - 自動スケーリングが発動して問題が自己解決する場合
  - エスカレーションが必要な場合、インシデント対応チームに引き継ぐ
- **オブザーバビリティポイント**:
  - 検知からアラートまでの時間
  - 問題特定までの平均時間
  - 解決までの平均時間
  - 類似問題の再発率

**UC-O02: エラー増加の検知と対応**

- **アクター**: システム運用者
- **前提条件**: アプリケーションが本番環境で稼働している
- **メインフロー**:
  1. モニタリングシステムが特定のAPIエンドポイントで4xx/5xxエラーの増加を検知する
  2. 運用者がアラートを受信し、エラーの種類と頻度を分析する
  3. ログとトレースを使用してエラーの根本原因を特定する
  4. 運用者が問題を修正し、エラー率の低下を確認する
- **代替フロー**:
  - 一時的なスパイクの場合、監視を続けながら自然解決を待つ
- **オブザーバビリティポイント**:
  - エラーの種類と分布
  - 影響を受けるユーザー数
  - エラー発生からの復旧時間
  - エラーのクラスタリングパターン

### 2. キャパシティプランニングと最適化

**UC-O03: リソース使用率の分析と予測**

- **アクター**: インフラストラクチャ管理者
- **前提条件**: 十分な履歴メトリクスデータが蓄積されている
- **メインフロー**:
  1. 管理者がリソース使用率ダッシュボードを確認し、トレンドを分析する
  2. CloudWatchの異常検出を使用して季節的パターンを特定する
  3. 将来の需要を予測し、必要なリソースを計画する
  4. 自動スケーリングポリシーを調整する
- **代替フロー**:
  - 特別なイベント（セール等）のための一時的な容量増強を計画する
- **オブザーバビリティポイント**:
  - リソース使用率の時間的パターン
  - スケーリングイベントの頻度と効果
  - コスト効率（使用率最適化）
  - 予測の精度評価

**UC-O04: パフォーマンス最適化**

- **アクター**: アプリケーション開発者
- **前提条件**: アプリケーションのパフォーマンスデータが収集されている
- **メインフロー**:
  1. 開発者がパフォーマンスダッシュボードを確認し、最適化候補を特定する
  2. X-Rayトレースを分析して、最も時間のかかる処理を特定する
  3. 特定の改善をコードに実装する
  4. デプロイ後のパフォーマンス変化を測定し、改善を確認する
- **代替フロー**:
  - データベースクエリの最適化
  - キャッシングの導入
  - 非同期処理への移行
- **オブザーバビリティポイント**:
  - パフォーマンス改善の前後比較
  - ユーザー体験への影響測定
  - コンポーネント別のパフォーマンス寄与度
  - 最適化の費用対効果

## ビジネスインテリジェンスユースケース

**UC-B01: 売上・トラフィック分析**

- **アクター**: ビジネスアナリスト
- **前提条件**: 十分な取引データが蓄積されている
- **メインフロー**:
  1. アナリストがビジネスインテリジェンスダッシュボードにアクセスする
  2. 期間、カテゴリ、地域などの軸で売上データをフィルタリングする
  3. トレンドを分析し、レポートを作成する
- **代替フロー**:
  - 特定の異常値やパターンをドリルダウンして詳細分析を行う
- **オブザーバビリティポイント**:
  - コンバージョン率の時間的・地域的変動
  - トラフィックソースと売上の相関
  - 顧客セグメント別の購買行動
  - リピート購入率と顧客生涯価値

**UC-B02: 商品パフォーマンス分析**

- **アクター**: 商品管理者
- **前提条件**: 十分な商品別販売データが蓄積されている
- **メインフロー**:
  1. 管理者が商品パフォーマンスダッシュボードにアクセスする
  2. 販売数、売上、利益率などのメトリクスで商品をランク付けする
  3. 低パフォーマンス商品を特定し、改善策を計画する
- **代替フロー**:
  - 特定商品の詳細分析（閲覧数vs購入数、カート放棄率など）
- **オブザーバビリティポイント**:
  - 商品別のコンバージョン率
  - 閲覧数に対するカート追加率
  - カテゴリ内での相対パフォーマンス
  - 価格変更の影響分析
