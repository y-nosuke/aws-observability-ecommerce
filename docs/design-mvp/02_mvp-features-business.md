# 1. AWSオブザーバビリティ学習用eコマースアプリ - MVP機能一覧

## 1.1. 顧客向け機能 (MVP)

### 1.1.1. 商品閲覧・検索 (基本機能)

| 機能ID          | 機能名           | 概要                                 |
| --------------- | ---------------- | ------------------------------------ |
| **C-BROWSE-01** | 商品一覧表示     | ユーザーが閲覧可能な商品リストの表示 |
| **C-BROWSE-02** | 商品詳細表示     | 個別商品の詳細情報と画像の表示       |
| **C-BROWSE-03** | カテゴリー別表示 | カテゴリーに基づいた商品の分類と表示 |
| **C-BROWSE-07** | 在庫状況表示     | 商品の在庫状況と在庫不足の表示       |

### 1.1.2. ショッピングとチェックアウト (シンプルな実装)

| 機能ID        | 機能名     | 概要                                                                |
| ------------- | ---------- | ------------------------------------------------------------------- |
| **C-SHOP-01** | カート機能 | 商品の追加/削除とカート内容表示（クライアントサイドのみの単純実装） |
| **C-SHOP-02** | 注文処理   | カートからチェックアウトと注文確定プロセス（シンプルなフロー）      |

## 1.2. 管理者向け機能 (MVP)

### 1.2.1. 商品管理 (基本機能)

| 機能ID        | 機能名       | 概要                                 |
| ------------- | ------------ | ------------------------------------ |
| **A-PROD-01** | 商品情報管理 | 商品データの基本的な管理（CRUD操作） |
| **A-PROD-02** | 商品登録機能 | 管理者による新規商品の登録と情報入力 |

### 1.2.2. 在庫管理 (最小実装)

| 機能ID       | 機能名         | 概要                                 |
| ------------ | -------------- | ------------------------------------ |
| **A-INV-01** | 在庫レベル監視 | 全商品の在庫状況の監視と基本的な表示 |
| **A-INV-03** | 在庫更新       | 在庫数の手動更新機能                 |

### 1.2.3. バッチ処理 (最小実装)

| 機能ID         | 機能名           | 概要                                   |
| -------------- | ---------------- | -------------------------------------- |
| **A-BATCH-01** | 在庫レポート生成 | 日次の在庫状況レポートの自動生成と配信 |

### 1.2.4. メディア処理 (最小実装)

| 機能ID        | 機能名       | 概要                                         |
| ------------- | ------------ | -------------------------------------------- |
| **A-PROD-05** | 商品画像処理 | アップロードされた商品画像の自動リサイズ処理 |

## 1.3. オブザーバビリティ機能 (MVP)

### 1.3.1. ログ関連

| 機能ID       | 機能名                         | 概要                                           |
| ------------ | ------------------------------ | ---------------------------------------------- |
| **O-LOG-01** | 構造化ログ設定                 | JSON形式での統一的なログ形式実装と収集         |
| **O-LOG-02** | ログレベル管理                 | ERROR/WARN/INFO/DEBUGの適切な使い分け          |
| **O-LOG-03** | CloudWatch Logsへのログ転送    | LocalStackを使用した開発環境でのログ転送設定   |
| **O-LOG-04** | コンテキスト情報付与           | リクエストID、ユーザーIDなどの情報をログに追加 |
| **O-LOG-05** | CloudWatch Logs Insightsクエリ | ログデータの効率的な検索と分析用クエリの作成   |
| **O-LOG-06** | 本番環境ログ設定               | 本番環境でのCloudWatch Logs設定と最適化        |

### 1.3.2. メトリクス収集

| 機能ID          | 機能名                        | 概要                                                        |
| --------------- | ----------------------------- | ----------------------------------------------------------- |
| **O-METRIC-01** | 基本メトリクス収集            | リクエスト数、レイテンシー、エラー率の測定                  |
| **O-METRIC-02** | インフラメトリクス収集        | CPU/メモリ使用率、ディスクI/O、ネットワークスループット計測 |
| **O-METRIC-03** | レスポンスタイム分布測定      | p50, p90, p95, p99パーセンタイルの計測                      |
| **O-METRIC-04** | ビジネスメトリクス収集        | 閲覧数、購入数など業務関連指標の収集                        |
| **O-METRIC-05** | CloudWatch Custom Metrics連携 | カスタムメトリクスのCloudWatchへの送信                      |
| **O-METRIC-06** | ビジネスメトリクスの拡張      | 高度なビジネス指標の追加と可視化                            |
| **O-METRIC-07** | メトリクスサービス実装        | 独立したメトリクス収集・管理サービス                        |
| **O-METRIC-08** | フロントエンドユーザー体験    | フロントエンドのユーザー体験に関わるメトリクス              |
| **O-METRIC-09** | フロントエンドパフォーマンス  | フロントエンドの応答性能に関わるメトリクス                  |
| **O-METRIC-10** | 管理アクションのメトリクス    | 管理操作の頻度や種類の計測                                  |
| **O-METRIC-11** | リソース使用状況モニタリング  | サーバーやDBのリソース使用状況の監視                        |

### 1.3.3. 分散トレース

| 機能ID         | 機能名                       | 概要                                              |
| -------------- | ---------------------------- | ------------------------------------------------- |
| **O-TRACE-01** | X-Ray基本統合                | AWS X-Rayによる基本的な分散トレース実装           |
| **O-TRACE-02** | Echo/sqlboiler統合           | ウェブフレームワークとORMへのトレース統合         |
| **O-TRACE-03** | トレースフィルタリング       | 特定のリクエストやエラーケースを効率的に検索      |
| **O-TRACE-04** | 管理操作カスタムトレース     | 管理機能に特化したカスタムトレースの実装          |
| **O-TRACE-05** | アップロード進捗トラッキング | ファイルアップロード処理の進捗トラッキング        |
| **O-TRACE-06** | 本番環境X-Ray設定            | 本番環境でのX-Ray設定とサンプリングレートの最適化 |

### 1.3.4. アラートと可視化

| 機能ID         | 機能名                       | 概要                                      |
| -------------- | ---------------------------- | ----------------------------------------- |
| **O-ALERT-01** | ヘルスチェックエンドポイント | サービス稼働状況確認用APIエンドポイント   |
| **O-ALERT-02** | 基本アラート設定             | エラー率や異常なレイテンシーの検出と通知  |
| **O-ALERT-03** | アラートとSNS通知            | アラート発生時のSNSを使った通知設定       |
| **O-ALERT-04** | 障害検出とアラート検証       | 障害シナリオにおけるアラート動作の検証    |
| **O-DASH-01**  | X-Rayダッシュボード          | X-Rayの分析データを活用したダッシュボード |
| **O-DASH-02**  | サービスマップ強化           | サービス間依存関係の詳細な可視化          |
| **O-DASH-03**  | REDダッシュボード            | Rate, Error, Duration指標のダッシュボード |
| **O-DASH-04**  | カスタムダッシュボード       | 目的別にカスタマイズしたダッシュボード    |

### 1.3.5. 相関・連携機能

| 機能ID        | 機能名               | 概要                                     |
| ------------- | -------------------- | ---------------------------------------- |
| **O-CORR-01** | 観測データの相関付け | ログ、メトリクス、トレースの相関関係表示 |

### 1.3.6. Lambda固有機能

| 機能ID          | 機能名               | 概要                                 |
| --------------- | -------------------- | ------------------------------------ |
| **O-LAMBDA-01** | Lambda実行ログ構造化 | Lambda関数の構造化されたログ出力     |
| **O-LAMBDA-02** | Lambda固有メトリクス | Lambda関数の実行時間、使用メモリなど |

### 1.3.7. インフラストラクチャ機能

| 機能ID         | 機能名                         | 概要                                              |
| -------------- | ------------------------------ | ------------------------------------------------- |
| **O-INFRA-01** | オブザーバビリティインフラ構築 | Terraform定義に組み込まれたオブザーバビリティ設定 |

### 1.3.8. RUMと合成監視

| 機能ID         | 機能名                    | 概要                                     |
| -------------- | ------------------------- | ---------------------------------------- |
| **O-RUM-01**   | CloudWatch RUM設定        | 実ユーザーモニタリングの設定と分析       |
| **O-SYNTH-01** | CloudWatch Synthetics設定 | 合成モニタリングによるユーザーフロー検証 |

### 1.3.9. 耐障害性とカオスエンジニアリング

| 機能ID         | 機能名                      | 概要                                     |
| -------------- | --------------------------- | ---------------------------------------- |
| **O-FAULT-01** | Fault Injection Service設定 | 故障注入サービスの基本設定               |
| **O-FAULT-02** | 高度な障害シナリオ          | 複合的な障害シナリオの設計と実行         |
| **O-CHAOS-01** | カオスエンジニアリング実験  | 制御された環境でのシステム耐障害性テスト |

### 1.3.10. 比較と最適化

| 機能ID        | 機能名                           | 概要                                       |
| ------------- | -------------------------------- | ------------------------------------------ |
| **O-COMP-01** | オブザーバビリティアプローチ比較 | AWS SDK v2とOpenTelemetryの実装比較と評価  |
| **O-COST-01** | コスト最適化                     | オブザーバビリティ関連コストの分析と最適化 |

## 1.4. MVPからの段階的機能拡張

MVP実装後は、以下の順序で機能を追加していきます：

1. **高度なオブザーバビリティ機能**
   - CloudWatch Synthetics: ユーザーフロー監視
   - CloudWatch RUM: 実際のユーザー体験計測
   - 異常検出: 動的ベースラインによるアラート

2. **ユーザー管理機能**
   - ユーザー登録・ログイン
   - プロフィール管理
   - お届け先住所管理

3. **商品機能強化**
   - 高度な商品検索
   - 商品レビュー機能
   - 商品レコメンデーション

4. **注文管理強化**
   - 注文履歴・トラッキング
   - 複数配送先対応
   - 支払い機能強化

5. **マイクロサービス化**
   - サービス分割
   - API Gateway導入
   - 認証・認可の一元管理

6. **イベント駆動機能**
   - 在庫変動通知
   - 価格変更通知
   - 非同期処理フロー

## 1.5. ユーザー体験フロー (MVP)

### 1.5.1. 商品閲覧と購入フロー

1. ホームページで商品カテゴリーを閲覧
2. 特定カテゴリーを選択して商品一覧表示
3. 商品をクリックして詳細ページに移動
4. 「カートに追加」ボタンをクリック
5. カートページに移動して内容を確認
6. 注文確定ボタンをクリックしてシンプルな注文フォームに入力
7. 注文完了画面で注文番号を確認

### 1.5.2. 管理者操作フロー

1. 管理者ページにアクセス
2. 商品一覧で在庫状況を確認
3. 商品の在庫数を更新
4. 新規商品を追加
5. 商品情報の編集

### 1.5.3. サーバーレス処理フロー

1. 管理者が商品画像をアップロード
2. 画像処理Lambdaが自動的に複数サイズにリサイズ
3. 日次バッチ処理で在庫レポートが自動生成
4. 管理者が在庫レポートをダッシュボードで確認
