# 1. AWSオブザーバビリティ学習用eコマースアプリ - 技術要素

このドキュメントでは、MVPと完成版の技術スタックの違いを一覧化し、各技術要素の特徴と用途を明らかにします。

## 1.1. 目次

- [1. AWSオブザーバビリティ学習用eコマースアプリ - 技術要素](#1-awsオブザーバビリティ学習用eコマースアプリ---技術要素)
  - [1.1. 目次](#11-目次)
  - [1.2. インフラストラクチャ](#12-インフラストラクチャ)
  - [1.3. オブザーバビリティサービス](#13-オブザーバビリティサービス)
  - [1.4. 開発言語・フレームワーク](#14-開発言語フレームワーク)
  - [1.5. オブザーバビリティ実装方法](#15-オブザーバビリティ実装方法)
  - [1.6. 開発環境](#16-開発環境)
  - [1.7. MVPと完成版の主な違い](#17-mvpと完成版の主な違い)

## 1.2. インフラストラクチャ

| カテゴリ               | 技術/サービス                   | MVP              | 完成版         | 主な用途・特徴                                |
| ---------------------- | ------------------------------- | ---------------- | -------------- | --------------------------------------------- |
| **フロントエンド**     | Next.js                         | ✅                | ✅              | Reactベースのフレームワーク、SSR/SSG対応      |
|                        | S3 + CloudFront                 | ✅                | ✅              | 静的アセットのホスティングと配信              |
| **API管理**            | Application Load Balancer (ALB) | ✅                | ✅              | バックエンドへのトラフィックルーティング      |
|                        | API Gateway                     | ❌                | ✅              | REST APIの一元管理、認証統合                  |
| **コンピューティング** | Fargate (ECS)                   | ✅                | ✅              | コンテナ実行環境、Goバックエンド実行          |
|                        | Lambda                          | ⚪️ (基本実装のみ) | ✅ (高度な実装) | サーバーレス関数、イベント処理                |
| **データストア**       | RDS (MySQL)                     | ✅                | ✅              | リレーショナルデータベース、主要データの保存  |
|                        | DynamoDB                        | ❌                | ✅              | NoSQLデータベース、高スケーラブルなデータ処理 |
| **ストレージ**         | S3                              | ✅                | ✅              | オブジェクトストレージ、画像・ファイル保存    |
| **メッセージング**     | EventBridge                     | ❌                | ✅              | イベント駆動型アーキテクチャの中核            |
|                        | SNS                             | ❌                | ✅              | 通知サービス、イベント配信                    |
|                        | SQS                             | ❌                | ✅              | メッセージキュー、処理の非同期化              |
| **通知**               | SES                             | ❌                | ✅              | Eメール送信サービス                           |

## 1.3. オブザーバビリティサービス

| カテゴリ                   | 技術/サービス                               | MVP              | 完成版         | 主な用途・特徴                                     |
| -------------------------- | ------------------------------------------- | ---------------- | -------------- | -------------------------------------------------- |
| **モニタリング基盤**       | CloudWatch Logs                             | ✅                | ✅              | アプリケーションログの集約、保存、検索             |
|                            | CloudWatch Metrics                          | ✅                | ✅              | システムとアプリケーションメトリクスの収集         |
|                            | CloudWatch Alarms                           | ✅                | ✅              | リソース使用率とエラー率の監視                     |
|                            | CloudWatch Dashboards                       | ✅                | ✅              | カスタムダッシュボードの作成、指標の可視化         |
|                            | X-Ray                                       | ✅                | ✅              | 分散トレーシング、サービス間の依存関係可視化       |
|                            | CloudWatch Synthetics                       | ❌                | ✅              | エンドツーエンドのユーザーフロー監視               |
| **高度な分析**             | DevOps Guru                                 | ❌                | ✅              | ML駆動の異常検出と問題の自動診断                   |
|                            | Amazon Managed Service for Prometheus (AMP) | ❌                | ✅              | 高度なメトリクス収集とクエリ                       |
|                            | Amazon Managed Grafana (AMG)                | ❌                | ✅              | 高度なダッシュボードと可視化                       |
| **標準化**                 | AWS Distro for OpenTelemetry (ADOT)         | ⚪️ (基本実装のみ) | ✅ (高度な実装) | 標準化されたテレメトリデータの収集                 |
| **監査・コンプライアンス** | CloudTrail                                  | ❌                | ✅              | API呼び出しの監査とコンプライアンス                |
|                            | AWS Config                                  | ❌                | ✅              | インフラストラクチャの構成変更の追跡               |
| **データ分析**             | OpenSearch Service                          | ❌                | ✅              | 大規模なログデータの検索と分析                     |
|                            | Athena                                      | ❌                | ✅              | ログデータへのSQLクエリとアドホック分析            |
| **ネットワーク監視**       | VPC Flow Logs                               | ❌                | ✅              | ネットワークトラフィックの可視化、セキュリティ分析 |
| **テスト・実験**           | Fault Injection Service                     | ❌                | ✅              | カオスエンジニアリングとレジリエンステスト         |
| **フロントエンド監視**     | CloudWatch RUM                              | ❌                | ✅              | 実ユーザー体験とパフォーマンスの測定               |
| **サービスヘルス**         | AWS Health Dashboard                        | ❌                | ✅              | AWSサービスのヘルスステータス監視                  |

## 1.4. 開発言語・フレームワーク

| カテゴリ           | 技術/サービス    | MVP              | 完成版         | 主な用途・特徴                                   |
| ------------------ | ---------------- | ---------------- | -------------- | ------------------------------------------------ |
| **フロントエンド** | TypeScript       | ✅                | ✅              | 静的型付けによる堅牢なコード開発                 |
|                    | Next.js          | ✅                | ✅              | Reactフレームワーク、ルーティング、SSR           |
|                    | React            | ✅                | ✅              | UIコンポーネントライブラリ                       |
|                    | TailwindCSS      | ✅                | ✅              | ユーティリティファーストのCSSフレームワーク      |
| **バックエンド**   | Go (Fargate)     | ✅                | ✅              | 高性能なバックエンド言語、Echo Webフレームワーク |
|                    | sqlboiler        | ✅                | ✅              | MySQLに特化したタイプセーフなORM                 |
|                    | OpenAPI/ogen     | ✅                | ✅              | API定義とコード生成                              |
|                    | slog             | ✅                | ✅              | Go標準の構造化ログライブラリ                     |
|                    | Node.js (Lambda) | ⚪️ (基本実装のみ) | ✅ (高度な実装) | サーバーレス関数の実装言語                       |

## 1.5. オブザーバビリティ実装方法

| アプローチ                   | 技術/サービス                | MVP              | 完成版         | 主な用途・特徴                  |
| ---------------------------- | ---------------------------- | ---------------- | -------------- | ------------------------------- |
| **aws-sdk-go v2 アプローチ** | X-Ray SDK for Go v2          | ✅                | ✅              | AWSネイティブな分散トレーシング |
|                              | CloudWatch SDK v2            | ✅                | ✅              | メトリクス送信                  |
|                              | slog + CloudWatch Logs       | ✅                | ✅              | 構造化ログの統合                |
| **OpenTelemetry アプローチ** | OpenTelemetry Go SDK         | ⚪️ (基本実装のみ) | ✅ (高度な実装) | ベンダー中立な計装              |
|                              | AWS Distro for OpenTelemetry | ⚪️ (基本実装のみ) | ✅ (高度な実装) | AWS環境への最適化               |
|                              | X-Ray Exporter               | ⚪️ (基本実装のみ) | ✅ (高度な実装) | OTELからX-Rayへのトレース送信   |

## 1.6. 開発環境

| カテゴリ         | 技術/サービス           | MVP              | 完成版         | 主な用途・特徴                        |
| ---------------- | ----------------------- | ---------------- | -------------- | ------------------------------------- |
| **コンテナ化**   | Docker                  | ✅                | ✅              | アプリケーションのコンテナ化          |
|                  | Docker Compose          | ✅                | ✅              | 複数コンテナの管理と調整              |
| **ローカル開発** | LocalStack              | ✅                | ✅              | AWSサービスのローカルエミュレーション |
|                  | Traefik                 | ✅                | ✅              | リバースプロキシ、ルーティング        |
| **デプロイ**     | GitHub Actions          | ✅                | ✅              | CI/CDパイプライン                     |
|                  | Terraform               | ⚪️ (基本実装のみ) | ✅ (高度な実装) | インフラのコード化                    |
| **テスト**       | Fault Injection Service | ❌                | ✅              | カオスエンジニアリングテスト          |

## 1.7. MVPと完成版の主な違い

1. **インフラストラクチャの拡張**:
   - MVPではシンプルなALB + Fargate + RDSの構成
   - 完成版ではAPI Gateway、DynamoDB、メッセージングサービス(SNS/SQS/EventBridge)が追加され、よりイベント駆動型のマイクロサービスアーキテクチャに発展

2. **オブザーバビリティの発展**:
   - MVPでは基本的なCloudWatch LogsとX-Rayの統合
   - 完成版ではADOT、RUM、Synthetics、DevOps Guruなど高度なモニタリングツールが追加され、包括的なオブザーバビリティが実現

3. **開発アプローチの進化**:
   - MVPではAWS SDK v2アプローチを中心に実装
   - 完成版ではOpenTelemetryアプローチへの移行と両アプローチの比較学習が可能

4. **サーバーレスの高度な活用**:
   - MVPではLambdaの基本的な使用（画像処理など）
   - 完成版ではイベント駆動型アーキテクチャ、Step Functions、非同期処理など高度なサーバーレスパターンを実装
