# 週1: プロジェクト基盤とログ実装

## 目標とするユースケース

| ユースケースID | ユースケース名   | 優先度 | 終了時達成目標 | 完了基準                                                |
| -------------- | ---------------- | ------ | -------------- | ------------------------------------------------------- |
| OBS-01         | 構造化ログ収集   | 高     | 85%            | JSONフォーマットのログがCloudWatch Logsに格納される     |
| OBS-02         | ログレベル管理   | 高     | 80%            | ERROR/WARN/INFO/DEBUGの各レベルのログが適切に記録される |
| OBS-07         | ヘルスチェック   | 高     | 60%            | ヘルスチェックエンドポイントが機能し、状態が報告される  |
| CUS-01         | 基本的な商品閲覧 | 高     | 10%            | モックAPIからの商品データ取得ができる（UI未実装）       |

## 実装する機能

| 機能ID      | 機能名                       | 説明                                         | 関連ユースケース | 終了時達成目標 |
| ----------- | ---------------------------- | -------------------------------------------- | ---------------- | -------------- |
| C-BROWSE-01 | 商品一覧表示                 | ユーザーが閲覧可能な商品リストを表示する機能 | CUS-01           | 25%            |
| O-ALERT-01  | ヘルスチェックエンドポイント | システムのヘルス状態を確認する機能           | OBS-07           | 70%            |
| O-LOG-01    | 構造化ログ設定               | JSON形式での統一的なログ形式実装と収集       | OBS-01           | 90%            |
| O-LOG-02    | ログレベル管理               | ERROR/WARN/INFO/DEBUGの適切な使い分け        | OBS-02           | 80%            |
| O-LOG-03    | CloudWatch Logsへのログ転送  | LocalStackを使用した開発環境でのログ転送設定 | OBS-01           | 85%            |

## 実装するAPI

| API ID         | API名             | エンドポイント  | メソッド | 関連機能    | 終了時達成目標 |
| -------------- | ----------------- | --------------- | -------- | ----------- | -------------- |
| API-HEALTH-01  | ヘルスチェックAPI | `/api/health`   | GET      | O-ALERT-01  | 100%           |
| API-PRODUCT-01 | モック商品一覧API | `/api/products` | GET      | C-BROWSE-01 | 100%           |

## 実装する画面

| 画面ID | 画面名     | 説明                                         | 関連機能 | 終了時達成目標 |
| ------ | ---------- | -------------------------------------------- | -------- | -------------- |
| C-01   | ホーム画面 | アプリケーションのホーム画面（基本構造のみ） | -        | 50%            |

## 詳細タスク

| タスクID | タスク名                                                   | タスク種別         | 見積時間 | 依存タスク         | 関連API        | 関連画面 | 関連機能    | 関連ユースケース |
| -------- | ---------------------------------------------------------- | ------------------ | -------- | ------------------ | -------------- | -------- | ----------- | ---------------- |
| TASK-001 | Docker Compose環境構築                                     | 環境構築           | 2h       | -                  | -              | -        | -           | -                |
| TASK-002 | Go/Echo開発環境セットアップ                                | 環境構築           | 2h       | TASK-001           | -              | -        | -           | -                |
| TASK-003 | Next.js開発環境セットアップ                                | 環境構築           | 2h       | TASK-001           | -              | -        | -           | -                |
| TASK-004 | Terraformの基本セットアップ（LocalStack用）                | 環境構築           | 3h       | TASK-001           | -              | -        | O-LOG-01    | OBS-01           |
| TASK-005 | AWS CLI設定                                                | 環境構築           | 1h       | TASK-001           | -              | -        | -           | -                |
| TASK-006 | バックエンド基本構造実装（プロジェクト構成、ディレクトリ） | 実装               | 3h       | TASK-002           | -              | -        | -           | -                |
| TASK-007 | ヘルスチェックAPI実装                                      | 実装               | 1h       | TASK-006           | API-HEALTH-01  | -        | O-ALERT-01  | OBS-07           |
| TASK-008 | モック商品一覧API実装                                      | 実装               | 2h       | TASK-006           | API-PRODUCT-01 | -        | C-BROWSE-01 | CUS-01           |
| TASK-009 | 構造化ログ(slog)設定                                       | オブザーバビリティ | 2h       | TASK-006           | -              | -        | O-LOG-01    | OBS-01           |
| TASK-010 | ログレベル管理設定                                         | オブザーバビリティ | 1h       | TASK-009           | -              | -        | O-LOG-02    | OBS-02           |
| TASK-011 | LocalStack用CloudWatch Logs Terraformモジュール作成        | インフラ           | 3h       | TASK-004           | -              | -        | O-LOG-01    | OBS-01           |
| TASK-012 | LocalStackへのログ転送設定                                 | オブザーバビリティ | 2h       | TASK-009, TASK-011 | -              | -        | O-LOG-03    | OBS-01           |
| TASK-013 | フロントエンド基本構造実装                                 | 実装               | 2h       | TASK-003           | -              | C-01     | -           | -                |
| TASK-014 | ユニットテスト作成（ヘルスチェックAPI）                    | テスト             | 1h       | TASK-007           | API-HEALTH-01  | -        | O-ALERT-01  | OBS-07           |
| TASK-015 | ユニットテスト作成（モック商品一覧API）                    | テスト             | 1h       | TASK-008           | API-PRODUCT-01 | -        | C-BROWSE-01 | CUS-01           |

## 週1の進捗追跡ダッシュボード

```
AWS オブザーバビリティ学習プロジェクト - 週1進捗ダッシュボード
----------------------------------------------------------
全体進捗: 15% [███·····················]

【タスク完了率】
週1のタスク: 100% [████████████████████████] (15/15 完了)

【API完成率】
API-HEALTH-01 (ヘルスチェックAPI): 100% [████████████████████████]
API-PRODUCT-01 (モック商品一覧API): 100% [████████████████████████]

【画面完成率】
C-01 (ホーム画面): 50% [████████████··········]

【機能完成率】
C-BROWSE-01 (商品一覧表示): 25% [██████················]
O-ALERT-01 (ヘルスチェックエンドポイント): 70% [█████████████████·······]
O-LOG-01 (構造化ログ設定): 90% [██████████████████████··]
O-LOG-02 (ログレベル管理): 80% [████████████████████····]
O-LOG-03 (CloudWatch Logsへのログ転送): 85% [█████████████████████···]

【ユースケース実現率】
CUS-01 (基本的な商品閲覧): 10% [██······················]
OBS-01 (構造化ログ収集): 85% [█████████████████████···]
OBS-02 (ログレベル管理): 80% [████████████████████····]
OBS-07 (ヘルスチェック): 60% [███████████████·········]

【カテゴリー別進捗】
顧客向け機能: 10% [██······················]
管理者向け機能: 0% [························]
オブザーバビリティ機能: 75% [██████████████████·····]

【次のステップ】
1. モデル設計とデータベース実装（週2）
2. 実データによる商品カタログの実装（週2）
3. 基本メトリクス収集の実装（週2）
```

## Notionでの管理ポイント

1. **タスクデータベース**:
   - プロパティ: タスクID、タスク名、タスク種別、見積時間、状態、完了率、担当者、フェーズタグ(週1)
   - リレーション: 関連API、関連画面、関連機能、関連ユースケース
   - 依存関係: 依存タスク（前提タスク）
   - ビュー: 「タスク種別別カンバン」「完了状況別リスト」「担当者別ボード」

2. **API/画面/機能/ユースケースのデータベース**:
   - 各エンティティ（API、画面、機能、ユースケース）を別々のNotionデータベースとして管理
   - プロパティ: ID、名前、説明、完了率（計算式）
   - リレーション: API・画面→機能→ユースケースの階層構造

3. **進捗計算の数式**:
   - API完成率: `関連タスクの完了率の平均値`
   - 機能完成率: `(関連APIの完成率 + 関連画面の完成率 + 関連タスクの完成率) ÷ 3`
   - ユースケース実現率: `関連機能の完成率の加重平均`

4. **進捗ダッシュボード**:
   - Notionの計算プロパティを活用して自動更新するダッシュボードを作成
   - プログレスバーはinline codeブロックで視覚的に表現
   - フィルタリングされたデータベースビューを埋め込み

## 週1の終了時点での成果物

1. **完全に機能する開発環境**:
   - Docker Compose環境（バックエンド、フロントエンド、データベース、LocalStack）
   - ホットリロード対応の開発フロー
   - 基本的なCI設定（GitHub Actions）

2. **基本的なAPI実装**:
   - ヘルスチェックAPI（`/api/health`）
   - モック商品一覧API（`/api/products`）

3. **オブザーバビリティの基盤**:
   - 構造化ログ（JSON形式）
   - ログレベル管理
   - LocalStackを使用したCloudWatch Logs連携

4. **フロントエンドの基本構造**:
   - Next.jsの基本構造
   - 共通コンポーネント（ヘッダー、フッター）
   - 基本的なページレイアウト

5. **テスト**:
   - APIのユニットテスト
   - 開発環境の動作確認スクリプト
